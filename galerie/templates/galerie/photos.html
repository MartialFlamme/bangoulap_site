{% extends 'base.html' %}
{% load static %}
{% block title %}Galerie Photo - Bangoulap{% endblock %}

{% block content %}
<section class="bg-white py-12">
    <div class="max-w-6xl mx-auto px-4">
        <h1 class="text-3xl font-bold text-green-800 text-center mb-10">ðŸ“¸ Galerie Photo</h1>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
            {% for photo in photos %}
                <div class="rounded-lg overflow-hidden shadow-md bg-white">
                    <!-- Miniature cliquable -->
                    <button onclick="openModal('{{ photo.image.url }}')" class="w-full focus:outline-none">
                        <img src="{{ photo.image.url }}" alt="{{ photo.titre }}" 
                             class="object-cover w-full h-56 hover:opacity-90 transition duration-200" />
                    </button>
                    <div class="p-4 bg-green-50 text-center">
                        <h2 class="font-semibold text-lg text-green-800 truncate">{{ photo.titre }}</h2>
                        {% if photo.evenement %}
                            <p class="text-sm text-gray-600 italic">ðŸ“… Ã‰vÃ©nement : {{ photo.evenement }}</p>
                        {% endif %}
                        <p class="text-xs text-gray-400 mt-1">AjoutÃ©e le {{ photo.date|date:"d M Y" }}</p>
                    </div>
                </div>
            {% empty %}
                <p class="text-center col-span-3 text-gray-500">Aucune photo disponible pour le moment.</p>
            {% endfor %}
        </div>
    </div>
</section>

<!-- MODAL responsive -->
<div id="imageModal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center hidden z-50 p-4" onclick="closeModal()">
    <div class="max-w-full max-h-full">
        <img id="modalImage" src="" alt="Image agrandie"
             class="w-full h-auto max-h-[90vh] rounded-lg shadow-lg object-contain">
    </div>
</div>

<!-- JS simple -->
<script>
    function openModal(imageUrl) {
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        modalImg.src = imageUrl;
        modal.classList.remove('hidden');
    }

    function closeModal() {
        const modal = document.getElementById('imageModal');
        modal.classList.add('hidden');
    }
</script>
{% endblock %}
